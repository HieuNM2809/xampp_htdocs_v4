# Chấp nhận kết nối từ mọi IP (cần thiết cho Docker)
bind 0.0.0.0

# Tắt chế độ bảo vệ vì đã bind 0.0.0.0
protected-mode no

# Port bên trong container
port 6379

# Ghi dữ liệu vào volume /data
dir /data
appendonly yes

# --- Cấu hình Replica ---
# Trỏ đến master bằng tên service trong Docker network
replicaof 127.0.0.1 6379
# Mật khẩu để replica kết nối đến master
masterauth YourStrongPasswordHere

# Mật khẩu để client kết nối đến replica này
requirepass YourStrongPasswordHere

# --- Cấu hình cho kết nối từ bên ngoài Docker ---
# "Quảng cáo" IP của máy host
replica-announce-ip 127.0.0.1
# "Quảng cáo" port của máy host đã được map (quan trọng!)
replica-announce-port 6381
